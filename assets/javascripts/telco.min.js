/* ============================================================
 * bootstrap-button.js v2.1.1
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */function onYouTubePlayerReady(e){var t=$("#"+e);t.mb_setMovie();$(document).on("mousedown",function(e){e.target.tagName.toLowerCase()=="a"&&t.pauseYTP()})}function playerState(e,t){var n=$("#"+t).get(0),r=$("#"+n.id+"_data").data();if(e==0&&r.isBgndMovie){$(document).trigger("YTPEnd");r.loop?n.playVideo():$(n).stopYTP()}if(e==0&&!r.isBgndMovie){$(document).trigger("YTPEnd");$(n).stopYTP()}if(e==-1||e==3){$(document).trigger("YTPBuffering");$(".mbYTP_bufferImg").show()}if(e==1&&r.isBgndMovie){$(n).css({opacity:r.opacity});$(".mbYTP_raster").css({opacity:1,backgroundColor:"transparent"});$("#wrapper_"+n.id).animate({opacity:1},1e3);$(document).trigger("YTPStart");$(".mbYTP_bufferImg").hide()}if(e==1&&!r.isBgndMovie){$(n).css({opacity:r.opacity});n.totalBytes=n.getVideoBytesTotal();$(document).trigger("YTPStart");$(".mbYTP_bufferImg").hide()}e==2&&$(document).trigger("YTPPause")}!function(e){"use strict";var t=function(t,n){this.$element=e(t);this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text";r.resetText||n.data("resetText",n[i]());n[i](r[e]||this.options[e]);setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)};t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active");this.$element.toggleClass("active")};e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s));n=="toggle"?i.toggle():n&&i.setState(n)})};e.fn.button.defaults={loadingText:"loading..."};e.fn.button.Constructor=t;e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn"));n.button("toggle")})})}(window.jQuery);!function(e){"use strict";var t=function(t,n){this.$element=e(t);this.options=e.extend({},e.fn.collapse.defaults,n);this.options.parent&&(this.$parent=e(this.options.parent));this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension();n=e.camelCase(["scroll",t].join("-"));r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide");i||r.data("collapse",null)}this.$element[t](0);this.transition("addClass",e.Event("show"),"shown");e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension();this.reset(this.$element[t]());this.transition("removeClass",e.Event("hide"),"hidden");this.$element[t](0)},reset:function(e){var t=this.dimension();this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth;this.$element[e!==null?"addClass":"removeClass"]("collapse");return this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset();i.transitioning=0;i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1;this.$element[t]("in");e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s));typeof n=="string"&&i[n]()})};e.fn.collapse.defaults={toggle:!0};e.fn.collapse.Constructor=t;e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed");e(i).collapse(s)})}(window.jQuery);!function(e){"use strict";function r(){e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;if(!n){n=t.attr("href");n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")}r=e(n);r.length||(r=t.parent());return r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;s=i(n);o=s.hasClass("open");r();if(!o){s.toggleClass("open");n.focus()}return!1},keydown:function(t){var n,r,s,o,u,a;if(!/(38|40|27)/.test(t.keyCode))return;n=e(this);t.preventDefault();t.stopPropagation();if(n.is(".disabled, :disabled"))return;o=i(n);u=o.hasClass("open");if(!u||u&&t.keyCode==27)return n.click();r=e("[role=menu] li:not(.divider) a",o);if(!r.length)return;a=r.index(r.filter(":focus"));t.keyCode==38&&a>0&&a--;t.keyCode==40&&a<r.length-1&&a++;~a||(a=0);r.eq(a).focus()}};e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this));typeof t=="string"&&i[t].call(r)})};e.fn.dropdown.Constructor=n;e(document).on("click.dropdown.data-api touchstart.dropdown.data-api",r).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery);!function(e){e(function(){"use strict";e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery);!function(e){"use strict";var t=function(t,n){this.options=n;this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open");this.isShown=!0;this.escape();this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body);t.$element.show();n&&t.$element[0].offsetWidth;t.$element.addClass("in").attr("aria-hidden",!1).focus();t.enforceFocus();n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide");this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1;e("body").removeClass("modal-open");this.escape();e(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",!0);e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end);t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n);t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body);this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this));i&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");i?this.$backdrop.one(e.support.transition.end,t):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()}else t&&t()}};e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s));typeof n=="string"?i[n]():s.show&&i.show()})};e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};e.fn.modal.Constructor=t;e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault();i.modal(s).one("hide",function(){n.focus()})})})}(window.jQuery);!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;if(!r){r=t.attr("href");r=r&&r.replace(/.*(?=#[^\s]*$)/,"")}if(t.parent("li").hasClass("active"))return;i=n.find(".active a").last()[0];o=e.Event("show",{relatedTarget:i});t.trigger(o);if(o.isDefaultPrevented())return;s=e(r);this.activate(t.parent("li"),n);this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");t.addClass("active");if(s){t[0].offsetWidth;t.addClass("in")}else t.removeClass("fade");t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active");r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o();i.removeClass("in")}};e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this));typeof n=="string"&&i[n]()})};e.fn.tab.Constructor=t;e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault();e(this).tab("show")})})}(window.jQuery);(function(e,t,n){var r=function(){var e=new RegExp("audio(.min)?.js.*"),t=document.getElementsByTagName("script");for(var n=0,r=t.length;n<r;n++){var i=t[n].getAttribute("src");if(e.test(i))return i.replace(e,"")}}();n[e]={instanceCount:0,instances:{},flashSource:'      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="$1" width="1" height="1" name="$1" style="position: absolute; left: -1px;">         <param name="movie" value="$2?playerInstance='+e+'.instances[\'$1\']&datetime=$3">         <param name="allowscriptaccess" value="always">         <embed name="$1" src="$2?playerInstance='+e+'.instances[\'$1\']&datetime=$3" width="1" height="1" allowscriptaccess="always">       </object>',settings:{autoplay:!1,loop:!1,preload:!0,imageLocation:r+"../images/audio-controls.png",swfLocation:r+"imports/audiojs.swf",useFlash:function(){var e=document.createElement("audio");return!e.canPlayType||!e.canPlayType("audio/mpeg;").replace(/no/,"")}(),hasFlash:function(){if(navigator.plugins&&navigator.plugins.length&&navigator.plugins["Shockwave Flash"])return!0;if(navigator.mimeTypes&&navigator.mimeTypes.length){var e=navigator.mimeTypes["application/x-shockwave-flash"];return e&&e.enabledPlugin}try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!0}catch(n){}return!1}(),createPlayer:{markup:'          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>           <div class="time">             <em class="played">00:00</em>/<strong class="duration">00:00</strong>           </div>           <div class="error-message"></div>',playPauseClass:"play-pause",scrubberClass:"scrubber",progressClass:"progress",loaderClass:"loaded",timeClass:"time",durationClass:"duration",playedClass:"played",errorMessageClass:"error-message",playingClass:"playing",loadingClass:"loading",errorClass:"error"},css:'        .audiojs audio { position: absolute; left: -1px; }         .audiojs { overflow: hidden; }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',trackEnded:function(e){},flashError:function(){var t=this.settings.createPlayer,r=i(t.errorMessageClass,this.wrapper),s='Missing <a href="http://get.adobe.com/flashplayer/">flash player</a> plugin.';this.mp3&&(s+=' <a href="'+this.mp3+'">Download audio file</a>.');n[e].helpers.removeClass(this.wrapper,t.loadingClass);n[e].helpers.addClass(this.wrapper,t.errorClass);r.innerHTML=s},loadError:function(t){var r=this.settings.createPlayer,s=i(r.errorMessageClass,this.wrapper);n[e].helpers.removeClass(this.wrapper,r.loadingClass);n[e].helpers.addClass(this.wrapper,r.errorClass);s.innerHTML='Error loading: "'+this.mp3+'"'},init:function(){var t=this.settings.createPlayer;n[e].helpers.addClass(this.wrapper,t.loadingClass)},loadStarted:function(){var t=this.settings.createPlayer,r=i(t.durationClass,this.wrapper),s=Math.floor(this.duration/60),o=Math.floor(this.duration%60);n[e].helpers.removeClass(this.wrapper,t.loadingClass);r.innerHTML=(s<10?"0":"")+s+":"+(o<10?"0":"")+o},loadProgress:function(e){var t=this.settings.createPlayer,n=i(t.scrubberClass,this.wrapper),r=i(t.loaderClass,this.wrapper);r.style.width=n.offsetWidth*e+"px"},playPause:function(){this.playing?this.settings.play():this.settings.pause()},play:function(){var t=this.settings.createPlayer;n[e].helpers.addClass(this.wrapper,t.playingClass)},pause:function(){var t=this.settings.createPlayer;n[e].helpers.removeClass(this.wrapper,t.playingClass)},updatePlayhead:function(e){var t=this.settings.createPlayer,n=i(t.scrubberClass,this.wrapper),r=i(t.progressClass,this.wrapper);r.style.width=n.offsetWidth*e+"px";var s=i(t.playedClass,this.wrapper),o=this.duration*e,u=Math.floor(o/60),a=Math.floor(o%60);s.innerHTML=(u<10?"0":"")+u+":"+(a<10?"0":"")+a}},create:function(e,t){var t=t||{};return e.length?this.createAll(t,e):this.newInstance(e,t)},createAll:function(e,t){var n=t||document.getElementsByTagName("audio"),r=[];e=e||{};for(var i=0,s=n.length;i<s;i++)r.push(this.newInstance(n[i],e));return r},newInstance:function(e,r){var e=e,i=this.helpers.clone(this.settings),s="audiojs"+this.instanceCount,o="audiojs_wrapper"+this.instanceCount,u=this.instanceCount++;e.getAttribute("autoplay")!=null&&(i.autoplay=!0);e.getAttribute("loop")!=null&&(i.loop=!0);e.getAttribute("preload")=="none"&&(i.preload=!1);r&&this.helpers.merge(i,r);i.createPlayer.markup?e=this.createPlayer(e,i.createPlayer,o):e.parentNode.setAttribute("id",o);var a=new n[t](e,i);i.css&&this.helpers.injectCss(a,i.css);if(i.useFlash&&i.hasFlash){this.injectFlash(a,s);this.attachFlashEvents(a.wrapper,a)}else i.useFlash&&!i.hasFlash&&this.settings.flashError.apply(a);(!i.useFlash||i.useFlash&&i.hasFlash)&&this.attachEvents(a.wrapper,a);this.instances[s]=a;return a},createPlayer:function(e,t,n){var r=document.createElement("div"),i=e.cloneNode(!0);r.setAttribute("class","audiojs");r.setAttribute("className","audiojs");r.setAttribute("id",n);if(i.outerHTML&&!document.createElement("audio").canPlayType){i=this.helpers.cloneHtml5Node(e);r.innerHTML=t.markup;r.appendChild(i);e.outerHTML=r.outerHTML;r=document.getElementById(n)}else{r.appendChild(i);r.innerHTML=r.innerHTML+t.markup;e.parentNode.replaceChild(r,e)}return r.getElementsByTagName("audio")[0]},attachEvents:function(t,r){if(!r.settings.createPlayer)return;var s=r.settings.createPlayer,o=i(s.playPauseClass,t),u=i(s.scrubberClass,t),a=function(e){var t=0;if(e.offsetParent)do t+=e.offsetLeft;while(e=e.offsetParent);return t};n[e].events.addListener(o,"click",function(e){r.playPause.apply(r)});n[e].events.addListener(u,"click",function(e){var t=e.clientX-a(this);r.skipTo(t/u.offsetWidth)});if(r.settings.useFlash)return;n[e].events.trackLoadProgress(r);n[e].events.addListener(r.element,"timeupdate",function(e){r.updatePlayhead.apply(r)});n[e].events.addListener(r.element,"ended",function(e){r.trackEnded.apply(r)});n[e].events.addListener(r.source,"error",function(e){clearInterval(r.readyTimer);clearInterval(r.loadTimer);r.settings.loadError.apply(r)})},attachFlashEvents:function(e,t){t.swfReady=!1;t.load=function(e){t.mp3=e;t.swfReady&&t.element.load(e)};t.loadProgress=function(e,n){t.loadedPercent=e;t.duration=n;t.settings.loadStarted.apply(t);t.settings.loadProgress.apply(t,[e])};t.skipTo=function(e){if(e>t.loadedPercent)return;t.updatePlayhead.call(t,[e]);t.element.skipTo(e)};t.updatePlayhead=function(e){t.settings.updatePlayhead.apply(t,[e])};t.play=function(){if(!t.settings.preload){t.settings.preload=!0;t.element.init(t.mp3)}t.playing=!0;t.element.pplay();t.settings.play.apply(t)};t.pause=function(){t.playing=!1;t.element.ppause();t.settings.pause.apply(t)};t.setVolume=function(e){t.element.setVolume(e)};t.loadStarted=function(){t.swfReady=!0;t.settings.preload&&t.element.init(t.mp3);t.settings.autoplay&&t.play.apply(t)}},injectFlash:function(e,t){var n=this.flashSource.replace(/\$1/g,t);n=n.replace(/\$2/g,e.settings.swfLocation);n=n.replace(/\$3/g,+(new Date)+Math.random());var r=e.wrapper.innerHTML,i=document.createElement("div");i.innerHTML=n+r;e.wrapper.innerHTML=i.innerHTML;e.element=this.helpers.getSwf(t)},helpers:{merge:function(e,t){for(attr in t)if(e.hasOwnProperty(attr)||t.hasOwnProperty(attr))e[attr]=t[attr]},clone:function(e){if(e==null||typeof e!="object")return e;var t=new e.constructor;for(var n in e)t[n]=arguments.callee(e[n]);return t},addClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");if(n.test(e.className))return;e.className+=" "+t},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")},injectCss:function(e,t){var n="",r=document.getElementsByTagName("style"),i=t.replace(/\$1/g,e.settings.imageLocation);for(var s=0,o=r.length;s<o;s++){var u=r[s].getAttribute("title");if(u&&~u.indexOf("audiojs")){l=r[s];if(l.innerHTML===i)return;n=l.innerHTML;break}}var a=document.getElementsByTagName("head")[0],f=a.firstChild,l=document.createElement("style");if(!a)return;l.setAttribute("type","text/css");l.setAttribute("title","audiojs");l.styleSheet?l.styleSheet.cssText=n+i:l.appendChild(document.createTextNode(n+i));f?a.insertBefore(l,f):a.appendChild(styleElement)},cloneHtml5Node:function(e){var t=document.createDocumentFragment(),n=t.createElement?t:document;n.createElement("audio");var r=n.createElement("div");t.appendChild(r);r.innerHTML=e.outerHTML;return r.firstChild},getSwf:function(e){var t=document[e]||window[e];return t.length>1?t[t.length-1]:t}},events:{memoryLeaking:!1,listeners:[],addListener:function(t,r,i){if(t.addEventListener)t.addEventListener(r,i,!1);else if(t.attachEvent){this.listeners.push(t);if(!this.memoryLeaking){window.attachEvent("onunload",function(){if(this.listeners)for(var t=0,r=this.listeners.length;t<r;t++)n[e].events.purge(this.listeners[t])});this.memoryLeaking=!0}t.attachEvent("on"+r,function(){i.call(t,window.event)})}},trackLoadProgress:function(e){if(!e.settings.preload)return;var t,n,e=e,r=/(ipod|iphone|ipad)/i.test(navigator.userAgent);t=setInterval(function(){e.element.readyState>-1&&(r||e.init.apply(e));if(e.element.readyState>1){e.settings.autoplay&&e.play.apply(e);clearInterval(t);n=setInterval(function(){e.loadProgress.apply(e);e.loadedPercent>=1&&clearInterval(n)})}},10);e.readyTimer=t;e.loadTimer=n},purge:function(e){var t=e.attributes,n;if(t)for(n=0;n<t.length;n+=1)typeof e[t[n].name]=="function"&&(e[t[n].name]=null);t=e.childNodes;if(t)for(n=0;n<t.length;n+=1)purge(e.childNodes[n])},ready:function(){return function(e){var t=window,n=!1,r=!0,i=t.document,s=i.documentElement,o=i.addEventListener?"addEventListener":"attachEvent",u=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",f=function(r){if(r.type=="readystatechange"&&i.readyState!="complete")return;(r.type=="load"?t:i)[u](a+r.type,f,!1);!n&&(n=!0)&&e.call(t,r.type||r)},l=function(){try{s.doScroll("left")}catch(e){setTimeout(l,50);return}f("poll")};if(i.readyState=="complete")e.call(t,"lazy");else{if(i.createEventObject&&s.doScroll){try{r=!t.frameElement}catch(c){}r&&l()}i[o](a+"DOMContentLoaded",f,!1);i[o](a+"readystatechange",f,!1);t[o](a+"load",f,!1)}}}()}};n[t]=function(e,t){this.element=e;this.wrapper=e.parentNode;this.source=e.getElementsByTagName("source")[0]||e;this.mp3=function(e){var t=e.getElementsByTagName("source")[0];return e.getAttribute("src")||(t?t.getAttribute("src"):null)}(e);this.settings=t;this.loadStartedCalled=!1;this.loadedPercent=0;this.duration=1;this.playing=!1};n[t].prototype={updatePlayhead:function(){var e=this.element.currentTime/this.duration;this.settings.updatePlayhead.apply(this,[e])},skipTo:function(e){if(e>this.loadedPercent)return;this.element.currentTime=this.duration*e;this.updatePlayhead()},load:function(t){this.loadStartedCalled=!1;this.source.setAttribute("src",t);this.element.load();this.mp3=t;n[e].events.trackLoadProgress(this)},loadError:function(){this.settings.loadError.apply(this)},init:function(){this.settings.init.apply(this)},loadStarted:function(){if(!this.element.duration)return!1;this.duration=this.element.duration;this.updatePlayhead();this.settings.loadStarted.apply(this)},loadProgress:function(){if(this.element.buffered!=null&&this.element.buffered.length){this.loadStartedCalled||(this.loadStartedCalled=this.loadStarted());var e=this.element.buffered.end(this.element.buffered.length-1);this.loadedPercent=e/this.duration;this.settings.loadProgress.apply(this,[this.loadedPercent])}},playPause:function(){this.playing?this.pause():this.play()},play:function(){var t=/(ipod|iphone|ipad)/i.test(navigator.userAgent);t&&this.element.readyState==0&&this.init.apply(this);if(!this.settings.preload){this.settings.preload=!0;this.element.setAttribute("preload","auto");n[e].events.trackLoadProgress(this)}this.playing=!0;this.element.play();this.settings.play.apply(this)},pause:function(){this.playing=!1;this.element.pause();this.settings.pause.apply(this)},setVolume:function(e){this.element.volume=e},trackEnded:function(e){this.skipTo.apply(this,[0]);this.settings.loop||this.pause.apply(this);this.settings.trackEnded.apply(this)}};var i=function(e,t){var n=[];t=t||document;if(t.getElementsByClassName)n=t.getElementsByClassName(e);else{var r,i,s=t.getElementsByTagName("*"),o=new RegExp("(^|\\s)"+e+"(\\s|$)");for(r=0,i=s.length;r<i;r++)o.test(s[r].className)&&n.push(s[r])}return n.length>1?n:n[0]}})("audiojs","audiojsInstance",this);(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,t){this.defaults.type=e;this.defaults.name=t},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;data="{}";if(settings.type=="class"){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if(settings.type=="elem"){if(!elem.getElementsByTagName)return undefined;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}data.indexOf("{")<0&&(data="{"+data+"}");data=eval("("+data+")");$.data(elem,settings.single,data);return data}}});$.fn.metadata=function(e){return $.metadata.get(this[0],e)}})(jQuery);(function(e){e.mbYTPlayer={name:"$.mb.YTPlayer",version:"1.4.0",author:"Matteo Bicocchi",width:450,controls:{play:"<img src='images/play.png'>",pause:"<img src='images/pause.png'>",mute:"<img src='images/mute.png'>",unmute:"<img src='images/unmute.png'>"},rasterImg:"images/raster.png",setYTPlayer:function(){var t=this;e.getScript("http://ajax.googleapis.com/ajax/libs/swfobject/2/swfobject.js",function(){t.each(function(){var t=e(this);if(!t.is("a"))return;t.attr("id")||t.attr("id","YTP_"+(new Date).getTime());var n=t.attr("id"),r=e("<span/>");r.attr("id",n+"_data").hide();var i=r.data();i.opacity=1;i.isBgndMovie=!1;i.width=e.mbYTPlayer.width;i.quality="default";i.muteSound=!1;i.hasControls=!1;i.ratio="16/9";i.bufferImg=!1;i.autoplay=!0;var s=typeof document.YTPBG!="undefined";if(e.metadata){e.metadata.setType("class");t.metadata().quality&&(i.quality=t.metadata().quality);t.metadata().width&&(i.width=t.metadata().width);t.metadata().opacity&&(i.opacity=e.browser.msie?1:t.metadata().opacity?t.metadata().opacity:i.opacity);if(t.metadata().isBgndMovie&&!s){i.isBgndMovie=t.metadata().isBgndMovie;i.width=t.metadata().isBgndMovie.width?t.metadata().isBgndMovie.width:"window"}t.metadata().optimizeDisplay&&i.isBgndMovie&&(i.optimizeDisplay=t.metadata().optimizeDisplay);t.metadata().muteSound&&(i.muteSound=t.metadata().muteSound);t.metadata().loop&&(i.loop=t.metadata().loop);t.metadata().hasControls&&(i.hasControls=t.metadata().hasControls);t.metadata().ratio&&(i.ratio=t.metadata().ratio);t.metadata().bufferImg&&(i.bufferImg=t.metadata().bufferImg);t.metadata().ID&&(i.ID=t.metadata().ID);t.metadata().autoplay!=undefined&&(i.autoplay=t.metadata().autoplay);t.metadata().showControls!=undefined&&(i.showControls=t.metadata().showControls);t.metadata().addRaster!=undefined?i.addRaster=t.metadata().addRaster:i.addRaster=!1;t.metadata().lightCrop!=undefined?i.lightCrop=t.metadata().lightCrop:i.lightCrop=!1}var o=i.ID?e("#"+i.ID):e("body");i.ID&&o.css({overflow:"hidden"});if(i.width=="window"){i.height="100%";i.width="100%"}else i.height=i.ratio=="16/9"?Math.ceil(9*i.width/16):Math.ceil(3*i.width/4);var u="";e(o).prepend(r);if(i.isBgndMovie){if(i.ID){var a=e("<div/>").css({position:"relative",zIndex:0}),f=o.css("position")=="static"?"relative":o.css("position");o.css("position",f);e(o).wrapInner(a);e(o).prepend(t)}else{e(o).css({position:"relative",zIndex:1});e(o).before(t)}var l=i.ID?"absolute":"fixed";u=e("<div/>").attr("id","wrapper_"+n).css({overflow:"hidden",position:l,left:0,top:0,width:"100%",height:"100%",opacity:0});t.wrap(u);if(!i.width.toString().indexOf("%")==-1){var c=e("<div/>").css({position:l,top:i.ratio=="4/3"&&!i.ID?-(i.height/4):0,left:0,display:"block",width:i.width,height:i.height});t.wrap(c)}}else{u=e("<span/>").attr("id","wrapper_"+n).css({width:i.width,height:i.height,position:"relative",opacity:0}).addClass("mb_YTVPlayer");t.wrap(u)}if(i.optimizeDisplay){e(window).resize(function(){e(t).optimizeDisplay()});e(document).on("YTPStart",function(){e(t).optimizeDisplay();setTimeout(function(){u.css({opacity:1})},2500)})}var h={allowScriptAccess:"always",wmode:"transparent",allowFullScreen:"true"},p={id:n};i.movieURL=t.attr("href")?t.attr("href").match(/[\\?&]v=([^&#]*)/)[1]:!1;swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3&playerapiid="+n,n,i.width,i.height,"8",null,null,h,p);var d={};r.get(0).defaults=e.extend(d,i)})})},setMovie:function(){var t=e(this).get(0);t.onVideoLoaded=undefined;var n=e("#"+t.id+"_data").data(),r=typeof document.YTPBG!="undefined",i=n.movieURL;e(t).css({opacity:n.opacity});var s=n.ID?"absolute":"fixed",o=n.bufferImg?e("<div/>").addClass("mbYTP_bufferImg").css({position:s,top:0,left:0,width:"100%",height:"100%",background:"url("+n.bufferImg+")"}).hide():!1,u=e(t).parents("div:first"),a=e("<div/>").addClass("mbYTP_raster").css({opacity:0,position:s,top:0,left:0,width:"100%",height:"100%",background:"url("+e.mbYTPlayer.rasterImg+")"});n.bufferImg&&e(u).after(o);if(n.isBgndMovie&&!r){n.addRaster&&e.mbYTPlayer.rasterImg&&e(".mbYTP_raster").length==0&&e(u).append(a);n.ID||(document.YTPBG=!0);i&&(n.autoplay?t.loadVideoByUrl("http://www.youtube.com/v/"+i,0):t.cueVideoByUrl("http://www.youtube.com/v/"+i,0));n.isBgndMovie.mute&&t.mute();n.showControls&&e(t).buildYTPControls()}else{t.cueVideoByUrl("http://www.youtube.com/v/"+i,0);e(t).buildYTPControls()}t.setPlaybackQuality(n.quality);setInterval(function(){playerState(t.getPlayerState(),t.id)},1e3)},changeMovie:function(t,n){var r=e(this).get(0),i=e("#"+r.id+"_data").data();if(n)e.extend(i,n);else{var s=e("#"+r.id+"_data").get(0).defaults;e.extend(i,s)}i.movieURL=t.match(/[\\?&]v=([^&#]*)/)[1];r.loadVideoByUrl("http://www.youtube.com/v/"+i.movieURL,0);e(r).optimizeDisplay()},getPlayer:function(){return this.get(0)},playYTP:function(){var t=e(this).get(0),n=e("#"+t.id+"_data").data(),r=n.ID?e(t).parent().parent():e(t).parent(),i=r.find(".mb_YTVPPlaypause");i.html(e.mbYTPlayer.controls.pause);t.playVideo()},stopYTP:function(){var t=e(this).get(0),n=e("#"+t.id+"_data").data(),r=n.ID?e(t).parent().parent():e(t).parent(),i=r.find(".mb_YTVPPlaypause");i.html(e.mbYTPlayer.controls.play);t.pauseVideo()},pauseYTP:function(){var t=e(this).get(0),n=e("#"+t.id+"_data").data(),r=n.ID?e(t).parent().parent():e(t).parent(),i=r.find(".mb_YTVPPlaypause");i.html(e.mbYTPlayer.controls.play)
;t.pauseVideo()},setYTPVolume:function(t){var n=e(this).get(0),r=e("#"+n.id+"_data").data();!t&&!r.vol&&n.getVolume()==0?r.vol=100:!t&&n.getVolume()>0||t&&n.getVolume()==t?r.vol=0:r.vol=t;n.setVolume(r.vol)},muteYTPVolume:function(){var t=e(this).get(0),n=e("#"+t.id+"_data").data(),r=n.ID?e(t).parent().parent():e(t).parent(),i=r.find(".mb_YTVPMuteUnmute");i.html(e.mbYTPlayer.controls.unmute);t.mute()},unmuteYTPVolume:function(){var t=e(this).get(0),n=e("#"+t.id+"_data").data(),r=n.ID?e(t).parent().parent():e(t).parent(),i=r.find(".mb_YTVPMuteUnmute");i.html(e.mbYTPlayer.controls.mute);t.unMute()},manageYTPProgress:function(){var t=e(this).get(0),n=e("#"+t.id+"_data").data(),r=n.ID?e(t).parent().parent():e(t).parent(),i=r.find(".mb_YTVPProgress"),s=r.find(".mb_YTVPLoaded"),o=r.find(".mb_YTVTime"),u=i.outerWidth(),a=t.getVideoStartBytes(),f=t.getVideoBytesTotal(),l=t.getVideoBytesLoaded(),c=Math.floor(t.getCurrentTime()),h=Math.floor(t.getDuration()),p=c*u/h,d=0;a&&(d=t.timeW);var v=l*(u-d)/f;s.css({left:d,width:v});o.css({left:0,width:p});return{totalTime:h,currentTime:c}},buildYTPControls:function(){var t=e(this).get(0),n=e("#"+t.id+"_data").data();if(typeof t.isInit!="undefined")return;t.isInit=!0;var r=e(this).parent(),i=e("<span/>").addClass("mb_YTVPBar").css({whiteSpace:"noWrap",position:n.isBgndMovie&&!n.ID?"fixed":"absolute"}).hide(),s=e("<div/>").addClass("buttonBar"),o=e("<span>"+e.mbYTPlayer.controls.play+"</span>").addClass("mb_YTVPPlaypause").click(function(){t.getPlayerState()==1?e(t).pauseYTP():e(t).playYTP()}),u=e("<span>"+e.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTVPMuteUnmute").click(function(){t.isMuted()?e(t).unmuteYTPVolume():e(t).muteYTPVolume()}),a=e("<span/>").addClass("mb_YTVPTime"),f=e("<div/>").addClass("mb_YTVPProgress").css("position","absolute").click(function(e){c.css({width:e.clientX-c.offset().left});t.timeW=e.clientX-c.offset().left;r.find(".mb_YTVPLoaded").css({width:0});var n=Math.floor(t.getDuration());t.goto=c.outerWidth()*n/f.outerWidth();t.seekTo(t.goto,!0);r.find(".mb_YTVPLoaded").css({width:0})}),l=e("<div/>").addClass("mb_YTVPLoaded").css("position","absolute"),c=e("<div/>").addClass("mb_YTVTime").css("position","absolute");f.append(l).append(c);s.append(o).append(u).append(a);i.append(s).append(f);n.ID?r.before(i):r.append(i);if(!n.isBgndMovie){r.css({opacity:n.opacity});r.hover(function(){i.fadeIn();clearInterval(t.getState);t.getState=setInterval(function(){t.isMuted()&&r.parent().find(".mb_YTVPMuteUnmute").html(e.mbYTPlayer.controls.unmute);var n=e(t).manageYTPProgress();e(".mb_YTVPTime").html(e.mbYTPlayer.formatTime(n.currentTime)+" / "+e.mbYTPlayer.formatTime(n.totalTime));t.getPlayerState()==1&&e(".mb_YTVPPlaypause").html()!=e.mbYTPlayer.controls.pause&&r.parent().find(".mb_YTVPPlaypause").html(e.mbYTPlayer.controls.pause);t.getPlayerState()==2&&r.parent().find(".mb_YTVPPlaypause").html(e.mbYTPlayer.controls.play)},1e3)},function(){i.fadeOut();clearInterval(t.getState)})}else{i.fadeIn();clearInterval(t.getState);t.getState=setInterval(function(){var n=e(t).manageYTPProgress();t.isMuted()&&r.parent().find(".mb_YTVPMuteUnmute").html(e.mbYTPlayer.controls.unmute);r.parent().find(".mb_YTVPTime").html(e.mbYTPlayer.formatTime(n.currentTime)+" / "+e.mbYTPlayer.formatTime(n.totalTime));t.getPlayerState()==1&&e(".mb_YTVPPlaypause").html()!=e.mbYTPlayer.controls.pause&&r.parent().find(".mb_YTVPPlaypause").html(e.mbYTPlayer.controls.pause);t.getPlayerState()==2&&r.parent().find(".mb_YTVPPlaypause").html(e.mbYTPlayer.controls.play)},1e3)}},formatTime:function(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return(t<9?"0"+t:t)+" : "+(n<9?"0"+n:n)}};e.fn.mb_YTPlayer=e.mbYTPlayer.setYTPlayer;e.fn.mb_setMovie=e.mbYTPlayer.setMovie;e.fn.changeMovie=e.mbYTPlayer.changeMovie;e.fn.getPlayer=e.mbYTPlayer.getPlayer;e.fn.buildYTPControls=e.mbYTPlayer.buildYTPControls;e.fn.playYTP=e.mbYTPlayer.playYTP;e.fn.stopYTP=e.mbYTPlayer.stopYTP;e.fn.pauseYTP=e.mbYTPlayer.pauseYTP;e.fn.muteYTPVolume=e.mbYTPlayer.muteYTPVolume;e.fn.unmuteYTPVolume=e.mbYTPlayer.unmuteYTPVolume;e.fn.setYTPVolume=e.mbYTPlayer.setYTPVolume;e.fn.manageYTPProgress=e.mbYTPlayer.manageYTPProgress})($);$.fn.toggleVideoState=function(){var e=this.get(0),t=e.isInit;t=="undefined"?this.mb_YTPlayer():e.getPlayerState()==1?e.pauseVideo():e.playVideo()};$.fn.optimizeDisplay=function(){var e=this.get(0),t=$("#"+e.id+"_data").data(),n=$("#wrapper_"+e.id),r=t.lightCrop,i={},s=t.ID?$("#"+t.ID):$(window);i.width=s.width();i.height=s.height();var o={};o.width=i.width+(r?i.width*20/100:0);o.height=t.ratio=="16/9"?Math.ceil(9*i.width/16):Math.ceil(3*i.width/4);var u=-((o.height-i.height)/2),a=-(r?i.width*10/100:0);if(o.height<i.height){o.height=i.height+(r?i.height*20/100:0);o.width=t.ratio=="16/9"?Math.ceil(16*i.height/9):Math.ceil(4*i.height/3);u=-(r?i.height*10/100:0);a=-((o.width-i.width)/2)}n.css({width:o.width,height:o.height,marginTop:u,marginLeft:a})};(function(e,t,n,r){"use strict";var i=n(e),s=n(t),o=n.fancybox=function(){o.open.apply(this,arguments)},u=null,a=t.createTouch!==r,f=function(e){return e&&e.hasOwnProperty&&e instanceof n},l=function(e){return e&&n.type(e)==="string"},c=function(e){return l(e)&&e.indexOf("%")>0},h=function(e){return e&&(!e.style.overflow||e.style.overflow!=="hidden")&&(e.clientWidth&&e.scrollWidth>e.clientWidth||e.clientHeight&&e.scrollHeight>e.clientHeight)},p=function(e,t){var n=parseInt(e,10)||0;t&&c(e)&&(n=o.getViewport()[t]/100*n);return Math.ceil(n)},d=function(e,t){return p(e,t)+"px"};n.extend(o,{version:"2.1.2",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!a,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(n.browser.msie?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeChange:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){if(!e)return;n.isPlainObject(t)||(t={});if(!1===o.close(!0))return;n.isArray(e)||(e=f(e)?n(e).get():[e]);n.each(e,function(i,s){var u={},a,c,h,p,d,v,m;if(n.type(s)==="object"){s.nodeType&&(s=n(s));if(f(s)){u={href:s.data("fancybox-href")||s.attr("href"),title:s.data("fancybox-title")||s.attr("title"),isDom:!0,element:s};n.metadata&&n.extend(!0,u,s.metadata())}else u=s}a=t.href||u.href||(l(s)?s:null);c=t.title!==r?t.title:u.title||"";h=t.content||u.content;p=h?"html":t.type||u.type;if(!p&&u.isDom){p=s.data("fancybox-type");if(!p){d=s.prop("class").match(/fancybox\.(\w+)/);p=d?d[1]:null}}if(l(a)){if(!p)if(o.isImage(a))p="image";else if(o.isSWF(a))p="swf";else if(a.charAt(0)==="#")p="inline";else if(l(s)){p="html";h=s}if(p==="ajax"){v=a.split(/\s+/,2);a=v.shift();m=v.shift()}}if(!h)if(p==="inline")a?h=n(l(a)?a.replace(/.*(?=#[^\s]+$)/,""):a):u.isDom&&(h=s);else if(p==="html")h=a;else if(!p&&!a&&u.isDom){p="inline";h=s}n.extend(u,{href:a,type:p,content:h,title:c,selector:m});e[i]=u});o.opts=n.extend(!0,{},o.defaults,t);t.keys!==r&&(o.opts.keys=t.keys?n.extend({},o.defaults.keys,t.keys):!1);o.group=e;return o._start(o.opts.index)},cancel:function(){var e=o.coming;if(!e||!1===o.trigger("onCancel"))return;o.hideLoading();o.ajaxLoad&&o.ajaxLoad.abort();o.ajaxLoad=null;o.imgPreload&&(o.imgPreload.onload=o.imgPreload.onerror=null);e.wrap&&e.wrap.stop(!0).trigger("onReset").remove();o.current||o.trigger("afterClose");o.coming=null},close:function(e){o.cancel();if(!1===o.trigger("beforeClose"))return;o.unbindEvents();if(!o.isOpen||e===!0){n(".fancybox-wrap").stop(!0).trigger("onReset").remove();o._afterZoomOut()}else{o.isOpen=o.isOpened=!1;o.isClosing=!0;n(".fancybox-item, .fancybox-nav").remove();o.wrap.stop(!0,!0).removeClass("fancybox-opened");o.transitions[o.current.closeMethod]()}},play:function(e){var t=function(){clearTimeout(o.player.timer)},r=function(){t();o.current&&o.player.isActive&&(o.player.timer=setTimeout(o.next,o.current.playSpeed))},i=function(){t();n("body").unbind(".player");o.player.isActive=!1;o.trigger("onPlayEnd")},s=function(){if(o.current&&(o.current.loop||o.current.index<o.group.length-1)){o.player.isActive=!0;n("body").bind({"afterShow.player onUpdate.player":r,"onCancel.player beforeClose.player":i,"beforeLoad.player":t});r();o.trigger("onPlayStart")}};e===!0||!o.player.isActive&&e!==!1?s():i()},next:function(e){var t=o.current;if(t){l(e)||(e=t.direction.next);o.jumpto(t.index+1,e,"next")}},prev:function(e){var t=o.current;if(t){l(e)||(e=t.direction.prev);o.jumpto(t.index-1,e,"prev")}},jumpto:function(e,t,n){var i=o.current;if(!i)return;e=p(e);o.direction=t||i.direction[e>=i.index?"next":"prev"];o.router=n||"jumpto";if(i.loop){e<0&&(e=i.group.length+e%i.group.length);e%=i.group.length}if(i.group[e]!==r){o.cancel();o._start(e)}},reposition:function(e,t){var r=o.current,i=r?r.wrap:null,s;if(i){s=o._getPosition(t);if(e&&e.type==="scroll"){delete s.position;i.stop(!0,!0).animate(s,200)}else{i.css(s);r.pos=n.extend({},r.dim,s)}}},update:function(e){var t=e&&e.type,n=!t||t==="orientationchange";if(n){clearTimeout(u);u=null}if(!o.isOpen||u)return;u=setTimeout(function(){var n=o.current;if(!n||o.isClosing)return;o.wrap.removeClass("fancybox-tmp");t!=="scroll"&&o._setDimension();(t!=="scroll"||!n.canShrink)&&o.reposition(e);o.trigger("onUpdate");u=null},n&&!a?0:300)},toggle:function(e){if(o.isOpen){o.current.fitToView=n.type(e)==="boolean"?e:!o.current.fitToView;if(a){o.wrap.removeAttr("style").addClass("fancybox-tmp");o.trigger("onUpdate")}o.update()}},hideLoading:function(){s.unbind(".loading");n("#fancybox-loading").remove()},showLoading:function(){var e,t;o.hideLoading();e=n('<div id="fancybox-loading"><div></div></div>').click(o.cancel).appendTo("body");s.bind("keydown.loading",function(e){(e.which||e.keyCode)===27&&o.cancel()});if(!o.defaults.fixed){t=o.getViewport();e.css({position:"absolute",top:t.h*.5+t.y,left:t.w*.5+t.x})}},getViewport:function(){var t=o.current&&o.current.locked||!1,n={x:i.scrollLeft(),y:i.scrollTop()};if(t){n.w=t[0].clientWidth;n.h=t[0].clientHeight}else{n.w=a&&e.innerWidth?e.innerWidth:i.width();n.h=a&&e.innerHeight?e.innerHeight:i.height()}return n},unbindEvents:function(){o.wrap&&f(o.wrap)&&o.wrap.unbind(".fb");s.unbind(".fb");i.unbind(".fb")},bindEvents:function(){var e=o.current,t;if(!e)return;i.bind("orientationchange.fb"+(a?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),o.update);t=e.keys;t&&s.bind("keydown.fb",function(i){var s=i.which||i.keyCode,u=i.target||i.srcElement;if(s===27&&o.coming)return!1;!i.ctrlKey&&!i.altKey&&!i.shiftKey&&!i.metaKey&&(!u||!u.type&&!n(u).is("[contenteditable]"))&&n.each(t,function(t,u){if(e.group.length>1&&u[s]!==r){o[t](u[s]);i.preventDefault();return!1}if(n.inArray(s,u)>-1){o[t]();i.preventDefault();return!1}})});n.fn.mousewheel&&e.mouseWheel&&o.wrap.bind("mousewheel.fb",function(t,r,i,s){var u=t.target||null,a=n(u),f=!1;while(a.length){if(f||a.is(".fancybox-skin")||a.is(".fancybox-wrap"))break;f=h(a[0]);a=n(a).parent()}if(r!==0&&!f&&o.group.length>1&&!e.canShrink){s>0||i>0?o.prev(s>0?"down":"left"):(s<0||i<0)&&o.next(s<0?"up":"right");t.preventDefault()}})},trigger:function(e,t){var r,i=t||o.coming||o.current;if(!i)return;n.isFunction(i[e])&&(r=i[e].apply(i,Array.prototype.slice.call(arguments,1)));if(r===!1)return!1;e==="onCancel"&&!o.isOpened&&(o.isActive=!1);i.helpers&&n.each(i.helpers,function(t,r){if(r&&o.helpers[t]&&n.isFunction(o.helpers[t][e])){r=n.extend(!0,{},o.helpers[t].defaults,r);o.helpers[t][e](r,i)}});n.event.trigger(e+".fb")},isImage:function(e){return l(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)},isSWF:function(e){return l(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t={},r,i,s,u,f;e=p(e);r=o.group[e]||null;if(!r)return!1;t=n.extend(!0,{},o.opts,r);u=t.margin;f=t.padding;n.type(u)==="number"&&(t.margin=[u,u,u,u]);n.type(f)==="number"&&(t.padding=[f,f,f,f]);t.modal&&n.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});t.autoSize&&(t.autoWidth=t.autoHeight=!0);t.width==="auto"&&(t.autoWidth=!0);t.height==="auto"&&(t.autoHeight=!0);t.group=o.group;t.index=e;o.coming=t;if(!1===o.trigger("beforeLoad")){o.coming=null;return}s=t.type;i=t.href;if(!s){o.coming=null;if(o.current&&o.router&&o.router!=="jumpto"){o.current.index=e;return o[o.router](o.direction)}return!1}o.isActive=!0;if(s==="image"||s==="swf"){t.autoHeight=t.autoWidth=!1;t.scrolling="visible"}s==="image"&&(t.aspectRatio=!0);s==="iframe"&&a&&(t.scrolling="scroll");t.wrap=n(t.tpl.wrap).addClass("fancybox-"+(a?"mobile":"desktop")+" fancybox-type-"+s+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body");n.extend(t,{skin:n(".fancybox-skin",t.wrap),outer:n(".fancybox-outer",t.wrap),inner:n(".fancybox-inner",t.wrap)});n.each(["Top","Right","Bottom","Left"],function(e,n){t.skin.css("padding"+n,d(t.padding[e]))});o.trigger("onReady");if(s==="inline"||s==="html"){if(!t.content||!t.content.length)return o._error("content")}else if(!i)return o._error("href");s==="image"?o._loadImage():s==="ajax"?o._loadAjax():s==="iframe"?o._loadIframe():o._afterLoad()},_error:function(e){n.extend(o.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:o.coming.tpl.error});o._afterLoad()},_loadImage:function(){var e=o.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null;o.coming.width=this.width;o.coming.height=this.height;o._afterLoad()};e.onerror=function(){this.onload=this.onerror=null;o._error("image")};e.src=o.coming.href;e.complete!==!0&&o.showLoading()},_loadAjax:function(){var e=o.coming;o.showLoading();o.ajaxLoad=n.ajax(n.extend({},e.ajax,{url:e.href,error:function(e,t){o.coming&&t!=="abort"?o._error("ajax",e):o.hideLoading()},success:function(t,n){if(n==="success"){e.content=t;o._afterLoad()}}}))},_loadIframe:function(){var e=o.coming,t=n(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",a?"auto":e.iframe.scrolling).attr("src",e.href);n(e.wrap).bind("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}});if(e.iframe.preload){o.showLoading();t.one("load",function(){n(this).data("ready",1);a||n(this).bind("load.fb",o.update);n(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();o._afterLoad()})}e.content=t.appendTo(e.inner);e.iframe.preload||o._afterLoad()},_preloadImages:function(){var e=o.group,t=o.current,n=e.length,r=t.preload?Math.min(t.preload,n-1):0,i,s;for(s=1;s<=r;s+=1){i=e[(t.index+s)%n];i.type==="image"&&i.href&&((new Image).src=i.href)}},_afterLoad:function(){var e=o.coming,t=o.current,r="fancybox-placeholder",i,s,u,a,l,c;o.hideLoading();if(!e||o.isActive===!1)return;if(!1===o.trigger("afterLoad",e,t)){e.wrap.stop(!0).trigger("onReset").remove();o.coming=null;return}if(t){o.trigger("beforeChange",t);t.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}o.unbindEvents();i=e;s=e.content;u=e.type;a=e.scrolling;n.extend(o,{wrap:i.wrap.removeClass("fancybox-tmp"),skin:i.skin,outer:i.outer,inner:i.inner,current:i,previous:t});l=i.href;switch(u){case"inline":case"ajax":case"html":if(i.selector)s=n("<div>").html(s).find(i.selector);else if(f(s)){s.data(r)||s.data(r,n('<div class="'+r+'"></div>').insertAfter(s).hide());s=s.show().detach();i.wrap.bind("onReset",function(){n(this).find(s).length&&s.hide().replaceAll(s.data(r)).data(r,!1)})}break;case"image":s=i.tpl.image.replace("{href}",l);break;case"swf":s='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+l+'"></param>';c="";n.each(i.swf,function(e,t){s+='<param name="'+e+'" value="'+t+'"></param>';c+=" "+e+'="'+t+'"'});s+='<embed src="'+l+'" type="application/x-shockwave-flash" width="100%" height="100%"'+c+"></embed></object>"}(!f(s)||!s.parent().is(i.inner))&&i.inner.append(s);o.trigger("beforeShow");i.inner.css("overflow",a==="yes"?"scroll":a==="no"?"hidden":a);o._setDimension();o.reposition();o.isOpen=!1;o.coming=null;o.bindEvents();o.isOpened?t.prevMethod&&o.transitions[t.prevMethod]():n(".fancybox-wrap").not(i.wrap).stop(!0).trigger("onReset").remove();o.transitions[o.isOpened?i.nextMethod:i.openMethod]();o._preloadImages()},_setDimension:function(){var e=o.getViewport(),t=0,r=!1,i=!1,s=o.wrap,u=o.skin,a=o.inner,f=o.current,l=f.width,h=f.height,v=f.minWidth,m=f.minHeight,g=f.maxWidth,y=f.maxHeight,b=f.scrolling,w=f.scrollOutside?f.scrollbarWidth:0,E=f.margin,S=p(E[1]+E[3]),x=p(E[0]+E[2]),T,N,C,k,L,A,O,M,_,D,P,H,B,j,I;s.add(u).add(a).width("auto").height("auto");T=p(u.outerWidth(!0)-u.width());N=p(u.outerHeight(!0)-u.height());C=S+T;k=x+N;L=c(l)?(e.w-C)*p(l)/100:l;A=c(h)?(e.h-k)*p(h)/100:h;if(f.type==="iframe"){j=f.content;if(f.autoHeight&&j.data("ready")===1)try{if(j[0].contentWindow.document.location){a.width(L).height(9999);I=j.contents().find("body");w&&I.css("overflow-x","hidden");A=I.height()}}catch(q){}}else if(f.autoWidth||f.autoHeight){a.addClass("fancybox-tmp");f.autoWidth||a.width(L);f.autoHeight||a.height(A);f.autoWidth&&(L=a.width());f.autoHeight&&(A=a.height());a.removeClass("fancybox-tmp")}l=p(L);h=p(A);_=L/A;v=p(c(v)?p(v,"w")-C:v);g=p(c(g)?p(g,"w")-C:g);m=p(c(m)?p(m,"h")-k:m);y=p(c(y)?p(y,"h")-k:y);O=g;M=y;if(f.fitToView){g=Math.min(e.w-C,g);y=Math.min(e.h-k,y)}H=e.w-S;B=e.h-x;if(f.aspectRatio){if(l>g){l=g;h=p(l/_)}if(h>y){h=y;l=p(h*_)}if(l<v){l=v;h=p(l/_)}if(h<m){h=m;l=p(h*_)}}else{l=Math.max(v,Math.min(l,g));if(f.autoHeight&&f.type!=="iframe"){a.width(l);h=a.height()}h=Math.max(m,Math.min(h,y))}if(f.fitToView){a.width(l).height(h);s.width(l+T);D=s.width();P=s.height();if(f.aspectRatio)while((D>H||P>B)&&l>v&&h>m){if(t++>19)break;h=Math.max(m,Math.min(y,h-10));l=p(h*_);if(l<v){l=v;h=p(l/_)}if(l>g){l=g;h=p(l/_)}a.width(l).height(h);s.width(l+T);D=s.width();P=s.height()}else{l=Math.max(v,Math.min(l,l-(D-H)));h=Math.max(m,Math.min(h,h-(P-B)))}}w&&b==="auto"&&h<A&&l+T+w<H&&(l+=w);a.width(l).height(h);s.width(l+T);D=s.width();P=s.height();r=(D>H||P>B)&&l>v&&h>m;i=f.aspectRatio?l<O&&h<M&&l<L&&h<A:(l<O||h<M)&&(l<L||h<A);n.extend(f,{dim:{width:d(D),height:d(P)},origWidth:L,origHeight:A,canShrink:r,canExpand:i,wPadding:T,hPadding:N,wrapSpace:P-u.outerHeight(!0),skinSpace:u.height()-h});!j&&f.autoHeight&&h>m&&h<y&&!i&&a.height("auto")},_getPosition:function(e){var t=o.current,n=o.getViewport(),r=t.margin,i=o.wrap.width()+r[1]+r[3],s=o.wrap.height()+r[0]+r[2],u={position:"absolute",top:r[0],left:r[3]};if(t.autoCenter&&t.fixed&&!e&&s<=n.h&&i<=n.w)u.position="fixed";else if(!t.locked){u.top+=n.y;u.left+=n.x}u.top=d(Math.max(u.top,u.top+(n.h-s)*t.topRatio));u.left=d(Math.max(u.left,u.left+(n.w-i)*t.leftRatio));return u},_afterZoomIn:function(){var e=o.current;if(!e)return;o.isOpen=o.isOpened=!0;o.wrap.css("overflow","visible").addClass("fancybox-opened");o.reposition();(e.closeClick||e.nextClick&&o.group.length>1)&&o.inner.css("cursor","pointer").bind("click.fb",function(t){!n(t.target).is("a")&&!n(t.target).parent().is("a")&&o[e.closeClick?"close":"next"]()});e.closeBtn&&n(e.tpl.closeBtn).appendTo(o.skin).bind("click.fb",o.close);if(e.arrows&&o.group.length>1){(e.loop||e.index>0)&&n(e.tpl.prev).appendTo(o.outer).bind("click.fb",o.prev);(e.loop||e.index<o.group.length-1)&&n(e.tpl.next).appendTo(o.outer).bind("click.fb",o.next)}o.trigger("afterShow");if(!e.loop&&e.index===e.group.length-1)o.play(!1);else if(o.opts.autoPlay&&!o.player.isActive){o.opts.autoPlay=!1;o.play()}},_afterZoomOut:function(){var e=o.current;n(".fancybox-wrap").stop(!0).trigger("onReset").remove();n.extend(o,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});o.trigger("afterClose",e)}});o.transitions={getOrigPosition:function(){var e=o.current,t=e.element,n=e.orig,r={},i=50,s=50,u=e.hPadding,a=e.wPadding,l=o.getViewport();if(!n&&e.isDom&&t.is(":visible")){n=t.find("img:first");n.length||(n=t)}if(f(n)){r=n.offset();if(n.is("img")){i=n.outerWidth();s=n.outerHeight()}}else{r.top=l.y+(l.h-s)*e.topRatio;r.left=l.x+(l.w-i)*e.leftRatio}if(o.wrap.css("position")==="fixed"||e.locked){r.top-=l.y;r.left-=l.x}r={top:d(r.top-u*e.topRatio),left:d(r.left-a*e.leftRatio),width:d(i+a),height:d(s+u)};return r},step:function(e,t){var n,r,i,s=t.prop,u=o.current,a=u.wrapSpace,f=u.skinSpace;if(s==="width"||s==="height"){n=t.end===t.start?1:(e-t.start)/(t.end-t.start);o.isClosing&&(n=1-n);r=s==="width"?u.wPadding:u.hPadding;i=e-r;o.skin[s](p(s==="width"?i:i-a*n));o.inner[s](p(s==="width"?i:i-a*n-f*n))}},zoomIn:function(){var e=o.current,t=e.pos,r=e.openEffect,i=r==="elastic",s=n.extend({opacity:1},t);delete s.position;if(i){t=this.getOrigPosition();e.openOpacity&&(t.opacity=.1)}else r==="fade"&&(t.opacity=.1);o.wrap.css(t).animate(s,{duration:r==="none"?0:e.openSpeed,easing:e.openEasing,step:i?this.step:null,complete:o._afterZoomIn})},zoomOut:function(){var e=o.current,t=e.closeEffect,n=t==="elastic",r={opacity:.1};if(n){r=this.getOrigPosition();e.closeOpacity&&(r.opacity=.1)}o.wrap.animate(r,{duration:t==="none"?0:e.closeSpeed,easing:e.closeEasing,step:n?this.step:null,complete:o._afterZoomOut})},changeIn:function(){var e=o.current,t=e.nextEffect,n=e.pos,r={opacity:1},i=o.direction,s=200,u;n.opacity=.1;if(t==="elastic"){u=i==="down"||i==="up"?"top":"left";if(i==="down"||i==="right"){n[u]=d(p(n[u])-s);r[u]="+="+s+"px"}else{n[u]=d(p(n[u])+s);r[u]="-="+s+"px"}}t==="none"?o._afterZoomIn():o.wrap.css(n).animate(r,{duration:e.nextSpeed,easing:e.nextEasing,complete:function(){setTimeout(o._afterZoomIn,20)}})},changeOut:function(){var e=o.previous,t=e.prevEffect,r={opacity:.1},i=o.direction,s=200;t==="elastic"&&(r[i==="down"||i==="up"?"top":"left"]=(i==="up"||i==="left"?"-":"+")+"="+s+"px");e.wrap.animate(r,{duration:t==="none"?0:e.prevSpeed,easing:e.prevEasing,complete:function(){n(this).trigger("onReset").remove()}})}};o.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!0},overlay:null,fixed:!1,create:function(){this.overlay&&this.close();this.overlay=n('<div class="fancybox-overlay"></div>').appendTo(this.el||"body");this.fixed=!1;if(o.defaults.fixed&&!a){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=!0}},open:function(e){var t=this;e=n.extend({},this.defaults,e);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create();if(!this.fixed){i.bind("resize.overlay",n.proxy(this.update,this));this.update()}e.closeClick&&this.overlay.bind("click.overlay",function(e){n(e.target).hasClass("fancybox-overlay")&&(o.isActive?o.close():t.close())});this.overlay.css(e.css).show()},close:function(){n(".fancybox-overlay").remove();i.unbind("resize.overlay");this.overlay=null},update:function(){var e="100%",r;this.overlay.width(e).height("100%");if(n.browser.msie){r=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth);s.width()>r&&(e=s.width())}else s.width()>i.width()&&(e=s.width());this.overlay.width(e).height(s.height())},onReady:function(e,r){n(".fancybox-overlay").stop(!0,!0);if(!this.overlay){this.margin=s.height()>i.height()||n("body").css("overflow-y")==="scroll"?n("body").css("margin-right"):!1;this.el=t.all&&!t.querySelector?n("html"):n("body");this.create()}if(e.locked&&this.fixed){r.locked=this.overlay.append(r.wrap);r.fixed=!1}e.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){if(t.locked){this.el.addClass("fancybox-lock");this.margin!==!1&&n("body").css("margin-right",p(this.margin)+t.scrollbarWidth)}this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){var t=this,r=e.speedOut;t.overlay&&!o.isActive&&t.overlay.fadeOut(r||0,function(){t.margin!==!1&&n("body").css("margin-right",t.margin);t.el.removeClass("fancybox-lock");t.close()})}};o.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t=o.current,r=t.title,i=e.type,s,u;n.isFunction(r)&&(r=r.call(t.element,t));if(!l(r)||n.trim(r)==="")return;s=n('<div class="fancybox-title fancybox-title-'+i+'-wrap">'+r+"</div>");switch(i){case"inside":u=o.skin;break;case"outside":u=o.wrap;break;case"over":u=o.inner;break;default:u=o.skin;s.appendTo("body");n.browser.msie&&s.width(s.width());s.wrapInner('<span class="child"></span>');o.current.margin[2]+=Math.abs(p(s.css("margin-bottom")))}s[e.position==="top"?"prependTo":"appendTo"](u)}};n.fn.fancybox=function(e){var t,r=n(this),i=this.selector||"",u=function(s){var u=n(this).blur(),a=t,f,l;if(!(s.ctrlKey||s.altKey||s.shiftKey||s.metaKey)&&!u.is(".fancybox-wrap")){f=e.groupAttr||"data-fancybox-group";l=u.attr(f);if(!l){f="rel";l=u.get(0)[f]}if(l&&l!==""&&l!=="nofollow"){u=i.length?n(i):r;u=u.filter("["+f+'="'+l+'"]');a=u.index(this)}e.index=a;o.open(u,e)!==!1&&s.preventDefault()}};e=e||{};t=e.index||0;!i||e.live===!1?r.unbind("click.fb-start").bind("click.fb-start",u):s.undelegate(i,"click.fb-start").delegate(i+":not('.fancybox-item, .fancybox-nav')","click.fb-start",u);return this};s.ready(function(){n.scrollbarWidth===r&&(n.scrollbarWidth=function(){var e=n('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),r=t.innerWidth()-t.height(99).innerWidth();e.remove();return r});n.support.fixedPosition===r&&(n.support.fixedPosition=function(){var e=n('<div style="position:fixed;top:20px;"></div>').appendTo("body"),t=e[0].offsetTop===20||e[0].offsetTop===15;e.remove();return t}());n.extend(o.defaults,{scrollbarWidth:n.scrollbarWidth(),fixed:n.support.fixedPosition,parent:n("body")})})})(window,document,jQuery);(function(e){e.fn.fitVids=function(t){var n={customSelector:null},r=document.createElement("div"),i=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];r.className="fit-vids-style";r.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>";i.parentNode.insertBefore(r,i);t&&e.extend(n,t);return this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.kickstarter.com']","object","embed"];n.customSelector&&t.push(n.customSelector);var r=e(this).find(t.join(","));r.each(function(){var t=e(this);if(this.tagName.toLowerCase()=="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)return;var n=this.tagName.toLowerCase()=="object"||t.attr("height")?t.attr("height"):t.height(),r=t.attr("width")?t.attr("width"):t.width(),i=n/r;if(!t.attr("id")){var s="fitvid"+Math.floor(Math.random()*999999);t.attr("id",s)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",i*100+"%");t.removeAttr("height").removeAttr("width")})})}})(jQuery);(function($){$.extend({tablesorter:new function(){function benchmark(e,t){log(e+","+((new Date).getTime()-t.getTime())+"ms")}function log(e){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(e):alert(e)}function buildParserCache(e,t){if(e.config.debug)var n="";if(e.tBodies.length==0)return;var r=e.tBodies[0].rows;if(r[0]){var i=[],s=r[0].cells,o=s.length;for(var u=0;u<o;u++){var a=!1;$.metadata&&$(t[u]).metadata()&&$(t[u]).metadata().sorter?a=getParserById($(t[u]).metadata().sorter):e.config.headers[u]&&e.config.headers[u].sorter&&(a=getParserById(e.config.headers[u].sorter));a||(a=detectParserForColumn(e,r,-1,u));e.config.debug&&(n+="column:"+u+" parser:"+a.id+"\n");i.push(a)}}e.config.debug&&log(n);return i}function detectParserForColumn(e,t,n,r){var i=parsers.length,s=!1,o=!1,u=!0;while(o==""&&u){n++;if(t[n]){s=getNodeFromRowAndCellIndex(t,n,r);o=trimAndGetNodeText(e.config,s);e.config.debug&&log("Checking if value was empty on row:"+n)}else u=!1}for(var a=1;a<i;a++)if(parsers[a].is(o,e,s))return parsers[a];return parsers[0]}function getNodeFromRowAndCellIndex(e,t,n){return e[t].cells[n]}function trimAndGetNodeText(e,t){return $.trim(getElementText(e,t))}function getParserById(e){var t=parsers.length;for(var n=0;n<t;n++)if(parsers[n].id.toLowerCase()==e.toLowerCase())return parsers[n];return!1}function buildCache(e){if(e.config.debug)var t=new Date;var n=e.tBodies[0]&&e.tBodies[0].rows.length||0,r=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,i=e.config.parsers,s={row:[],normalized:[]};for(var o=0;o<n;++o){var u=$(e.tBodies[0].rows[o]),a=[];if(u.hasClass(e.config.cssChildRow)){s.row[s.row.length-1]=s.row[s.row.length-1].add(u);continue}s.row.push(u);for(var f=0;f<r;++f)a.push(i[f].format(getElementText(e.config,u[0].cells[f]),e,u[0].cells[f]));a.push(s.normalized.length);s.normalized.push(a);a=null}e.config.debug&&benchmark("Building cache for "+n+" rows:",t);return s}function getElementText(e,t){var n="";if(!t)return"";e.supportsTextContent||(e.supportsTextContent=t.textContent||!1);e.textExtraction=="simple"?e.supportsTextContent?n=t.textContent:t.childNodes[0]&&t.childNodes[0].hasChildNodes()?n=t.childNodes[0].innerHTML:n=t.innerHTML:typeof e.textExtraction=="function"?n=e.textExtraction(t):n=$(t).text();return n}function appendToTable(e,t){if(e.config.debug)var n=new Date;var r=t,i=r.row,s=r.normalized,o=s.length,u=s[0].length-1,a=$(e.tBodies[0]),f=[];for(var l=0;l<o;l++){var c=s[l][u];f.push(i[c]);if(!e.config.appender){var h=i[c].length;for(var p=0;p<h;p++)a[0].appendChild(i[c][p])}}e.config.appender&&e.config.appender(e,f);f=null;e.config.debug&&benchmark("Rebuilt table:",n);applyWidget(e);setTimeout(function(){$(e).trigger("sortEnd")},0)}function buildHeaders(e){if(e.config.debug)var t=new Date;var n=$.metadata?!0:!1,r=computeTableHeaderCellIndexes(e);$tableHeaders=$(e.config.selectorHeaders,e).each(function(t){this.column=r[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(e.config.sortInitialOrder);this.count=this.order;if(checkHeaderMetadata(this)||checkHeaderOptions(e,t))this.sortDisabled=!0;checkHeaderOptionsSortingLocked(e,t)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(e,t));if(!this.sortDisabled){var n=$(this).addClass(e.config.cssHeader);e.config.onRenderHeader&&e.config.onRenderHeader.apply(n)}e.config.headerList[t]=this});if(e.config.debug){benchmark("Built headers:",t);log($tableHeaders)}return $tableHeaders}function computeTableHeaderCellIndexes
(e){var t=[],n={},r=e.getElementsByTagName("THEAD")[0],i=r.getElementsByTagName("TR");for(var s=0;s<i.length;s++){var o=i[s].cells;for(var u=0;u<o.length;u++){var a=o[u],f=a.parentNode.rowIndex,l=f+"-"+a.cellIndex,c=a.rowSpan||1,h=a.colSpan||1,p;typeof t[f]=="undefined"&&(t[f]=[]);for(var d=0;d<t[f].length+1;d++)if(typeof t[f][d]=="undefined"){p=d;break}n[l]=p;for(var d=f;d<f+c;d++){typeof t[d]=="undefined"&&(t[d]=[]);var v=t[d];for(var m=p;m<p+h;m++)v[m]="x"}}}return n}function checkCellColSpan(e,t,n){var r=[],i=e.tHead.rows,s=i[n].cells;for(var o=0;o<s.length;o++){var u=s[o];u.colSpan>1?r=r.concat(checkCellColSpan(e,headerArr,n++)):(e.tHead.length==1||u.rowSpan>1||!i[n+1])&&r.push(u)}return r}function checkHeaderMetadata(e){return $.metadata&&$(e).metadata().sorter===!1?!0:!1}function checkHeaderOptions(e,t){return e.config.headers[t]&&e.config.headers[t].sorter===!1?!0:!1}function checkHeaderOptionsSortingLocked(e,t){return e.config.headers[t]&&e.config.headers[t].lockedOrder?e.config.headers[t].lockedOrder:!1}function applyWidget(e){var t=e.config.widgets,n=t.length;for(var r=0;r<n;r++)getWidgetById(t[r]).format(e)}function getWidgetById(e){var t=widgets.length;for(var n=0;n<t;n++)if(widgets[n].id.toLowerCase()==e.toLowerCase())return widgets[n]}function formatSortingOrder(e){return typeof e!="Number"?e.toLowerCase()=="desc"?1:0:e==1?1:0}function isValueInArray(e,t){var n=t.length;for(var r=0;r<n;r++)if(t[r][0]==e)return!0;return!1}function setHeadersCss(e,t,n,r){t.removeClass(r[0]).removeClass(r[1]);var i=[];t.each(function(e){this.sortDisabled||(i[this.column]=$(this))});var s=n.length;for(var o=0;o<s;o++)i[n[o][0]].addClass(r[n[o][1]])}function fixColumnWidth(e,t){var n=e.config;if(n.widthFixed){var r=$("<colgroup>");$("tr:first td",e.tBodies[0]).each(function(){r.append($("<col>").css("width",$(this).width()))});$(e).prepend(r)}}function updateHeaderSortCount(e,t){var n=e.config,r=t.length;for(var i=0;i<r;i++){var s=t[i],o=n.headerList[s[0]];o.count=s[1];o.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s=table.config.parsers[c].type=="text"?order==0?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):order==0?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s;dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";dynamicExp+="return 0; ";dynamicExp+="}; ";table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date);eval(dynamicExp);cache.normalized.sort(sortWrapper);table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);return cache}function makeSortFunction(e,t,n){var r="a["+n+"]",i="b["+n+"]";if(e=="text"&&t=="asc")return"("+r+" == "+i+" ? 0 : ("+r+" === null ? Number.POSITIVE_INFINITY : ("+i+" === null ? Number.NEGATIVE_INFINITY : ("+r+" < "+i+") ? -1 : 1 )));";if(e=="text"&&t=="desc")return"("+r+" == "+i+" ? 0 : ("+r+" === null ? Number.POSITIVE_INFINITY : ("+i+" === null ? Number.NEGATIVE_INFINITY : ("+i+" < "+r+") ? -1 : 1 )));";if(e=="numeric"&&t=="asc")return"("+r+" === null && "+i+" === null) ? 0 :("+r+" === null ? Number.POSITIVE_INFINITY : ("+i+" === null ? Number.NEGATIVE_INFINITY : "+r+" - "+i+"));";if(e=="numeric"&&t=="desc")return"("+r+" === null && "+i+" === null) ? 0 :("+r+" === null ? Number.POSITIVE_INFINITY : ("+i+" === null ? Number.NEGATIVE_INFINITY : "+i+" - "+r+"));"}function makeSortText(e){return"((a["+e+"] < b["+e+"]) ? -1 : ((a["+e+"] > b["+e+"]) ? 1 : 0));"}function makeSortTextDesc(e){return"((b["+e+"] < a["+e+"]) ? -1 : ((b["+e+"] > a["+e+"]) ? 1 : 0));"}function makeSortNumeric(e){return"a["+e+"]-b["+e+"];"}function makeSortNumericDesc(e){return"b["+e+"]-a["+e+"];"}function sortText(e,t){return table.config.sortLocaleCompare?e.localeCompare(t):e<t?-1:e>t?1:0}function sortTextDesc(e,t){return table.config.sortLocaleCompare?t.localeCompare(e):t<e?-1:t>e?1:0}function sortNumeric(e,t){return e-t}function sortNumericDesc(e,t){return t-e}function getCachedSortType(e,t){return e[t].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=benchmark;this.construct=function(e){return this.each(function(){if(!this.tHead||!this.tBodies)return;var t,n,r,i,s,o=0,u;this.config={};s=$.extend(this.config,$.tablesorter.defaults,e);t=$(this);$.data(this,"tablesorter",s);r=buildHeaders(this);this.config.parsers=buildParserCache(this,r);i=buildCache(this);var a=[s.cssDesc,s.cssAsc];fixColumnWidth(this);r.click(function(e){var n=t[0].tBodies[0]&&t[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&n>0){t.trigger("sortStart");var o=$(this),u=this.column;this.order=this.count++%2;this.lockedOrder&&(this.order=this.lockedOrder);if(!e[s.sortMultiSortKey]){s.sortList=[];if(s.sortForce!=null){var f=s.sortForce;for(var l=0;l<f.length;l++)f[l][0]!=u&&s.sortList.push(f[l])}s.sortList.push([u,this.order])}else if(isValueInArray(u,s.sortList))for(var l=0;l<s.sortList.length;l++){var c=s.sortList[l],h=s.headerList[c[0]];if(c[0]==u){h.count=c[1];h.count++;c[1]=h.count%2}}else s.sortList.push([u,this.order]);setTimeout(function(){setHeadersCss(t[0],r,s.sortList,a);appendToTable(t[0],multisort(t[0],s.sortList,i))},1);return!1}}).mousedown(function(){if(s.cancelSelection){this.onselectstart=function(){return!1};return!1}});t.bind("update",function(){var e=this;setTimeout(function(){e.config.parsers=buildParserCache(e,r);i=buildCache(e)},1)}).bind("updateCell",function(e,t){var n=this.config,r=[t.parentNode.rowIndex-1,t.cellIndex];i.normalized[r[0]][r[1]]=n.parsers[r[1]].format(getElementText(n,t),t)}).bind("sorton",function(e,t){$(this).trigger("sortStart");s.sortList=t;var n=s.sortList;updateHeaderSortCount(this,n);setHeadersCss(this,r,n,a);appendToTable(this,multisort(this,n,i))}).bind("appendCache",function(){appendToTable(this,i)}).bind("applyWidgetId",function(e,t){getWidgetById(t).format(this)}).bind("applyWidgets",function(){applyWidget(this)});$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(s.sortList=$(this).metadata().sortlist);s.sortList.length>0&&t.trigger("sorton",[s.sortList]);applyWidget(this)})};this.addParser=function(e){var t=parsers.length,n=!0;for(var r=0;r<t;r++)parsers[r].id.toLowerCase()==e.id.toLowerCase()&&(n=!1);n&&parsers.push(e)};this.addWidget=function(e){widgets.push(e)};this.formatFloat=function(e){var t=parseFloat(e);return isNaN(t)?0:t};this.formatInt=function(e){var t=parseInt(e);return isNaN(t)?0:t};this.isDigit=function(e,t){return/^[-+]?\d*$/.test($.trim(e.replace(/[,.']/g,"")))};this.clearTableBody=function(e){if($.browser.msie){function t(){while(this.firstChild)this.removeChild(this.firstChild)}t.apply(e.tBodies[0])}else e.tBodies[0].innerHTML=""}}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(e){return!0},format:function(e){return $.trim(e.toLocaleLowerCase())},type:"text"});ts.addParser({id:"digit",is:function(e,t){var n=t.config;return $.tablesorter.isDigit(e,n)},format:function(e){return $.tablesorter.formatFloat(e)},type:"numeric"});ts.addParser({id:"currency",is:function(e){return/^[$?.]/.test(e)},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/[$]/g),""))},type:"numeric"});ts.addParser({id:"ipAddress",is:function(e){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(e)},format:function(e){var t=e.split("."),n="",r=t.length;for(var i=0;i<r;i++){var s=t[i];s.length==2?n+="0"+s:n+=s}return $.tablesorter.formatFloat(n)},type:"numeric"});ts.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\/$/.test(e)},format:function(e){return jQuery.trim(e.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});ts.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},format:function(e){return $.tablesorter.formatFloat(e!=""?(new Date(e.replace(new RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});ts.addParser({id:"percent",is:function(e){return/\%$/.test($.trim(e))},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"});ts.addParser({id:"usLongDate",is:function(e){return e.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(e){return $.tablesorter.formatFloat((new Date(e)).getTime())},type:"numeric"});ts.addParser({id:"shortDate",is:function(e){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(e)},format:function(e,t){var n=t.config;e=e.replace(/\-/g,"/");if(n.dateFormat=="us")e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if(n.dateFormat=="uk")e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if(n.dateFormat=="dd/mm/yy"||n.dateFormat=="dd-mm-yy")e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return $.tablesorter.formatFloat((new Date(e)).getTime())},type:"numeric"});ts.addParser({id:"time",is:function(e){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(e)},format:function(e){return $.tablesorter.formatFloat((new Date("2000/01/01 "+e)).getTime())},type:"numeric"});ts.addParser({id:"metadata",is:function(e){return!1},format:function(e,t,n){var r=t.config,i=r.parserMetadataName?r.parserMetadataName:"sortValue";return $(n).metadata()[i]},type:"numeric"});ts.addWidget({id:"zebra",format:function(e){if(e.config.debug)var t=new Date;var n,r=-1,i;$("tr:visible",e.tBodies[0]).each(function(t){n=$(this);n.hasClass(e.config.cssChildRow)||r++;i=r%2==0;n.removeClass(e.config.widgetZebra.css[i?0:1]).addClass(e.config.widgetZebra.css[i?1:0])});e.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",t)}})})(jQuery);(function(){var e,t,n;n=function(){function e(e){this.comparator=e;this.contents=[];this.sorted=!1}e.prototype.sort=function(){this.contents.sort(this.comparator);return this.sotred=!0};e.prototype.push=function(e){this.contents.push(e);return this.sorted=!1};e.prototype.peek=function(e){e==null&&(e=this.contents.length-1);this.sorted||this.sort();return this.contents[e]};e.prototype.pop=function(){this.sorted||this.sort();return this.contents.pop()};e.prototype.size=function(){return this.contents.length};e.prototype.map=function(e){return this.contents.map(e)};return e}();t=function(){function a(){this.maxIterations=1e3;this.fractByPopulations=.75}var e,t,r,i,s,o,u=this;a.sigbits=5;a.rshift=8-a.sigbits;i=function(e,t,n){return(e<<2*a.sigbits)+(t<<a.sigbits)+n};e=function(){function e(e,t,n,r,i,s,o){this.r1=e;this.r2=t;this.g1=n;this.g2=r;this.b1=i;this.b2=s;this.histo=o}e.prototype.volume=function(e){if(!this._volume||e)this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1);return this._volume};e.prototype.count=function(e){var t,n,r,s,o,u,a,f,l,c,h,p,d,v;if(!this._count_set||e){s=0;for(o=u=l=this.r1,c=this.r2;u<=c;o=u+=1)for(n=a=h=this.g1,p=this.g2;a<=p;n=a+=1)for(t=f=d=this.b1,v=this.b2;f<=v;t=f+=1){r=i(o,n,t);s+=this.histo[r]||0}this._count_set=!0;this._count=s}return this._count};e.prototype.copy=function(){return new e(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)};e.prototype.average=function(e){var t,n,r,s,o,u,f,l,c,h,p,d,v,m,g,y,b,w,E;if(!this._average||e){f=1<<8-a.sigbits;h=0;c=0;s=0;n=0;for(l=p=m=this.r1,g=this.r2;p<=g;l=p+=1)for(r=d=y=this.g1,b=this.g2;d<=b;r=d+=1)for(t=v=w=this.b1,E=this.b2;v<=E;t=v+=1){u=i(l,r,t);o=this.histo[u]||0;h+=o;c+=o*(l+.5)*f;s+=o*(r+.5)*f;n+=o*(t+.5)*f}h?this._average=[~~(c/h),~~(s/h),~~(n/h)]:this._average=[~~(f*(this.r1+this.r2+1)/2),~~(f*(this.g1+this.g2+1)/2),~~(f*(this.b1+this.b2+1)/2)]}return this._average};e.prototype.contains=function(e){var t,n,r;r=e[0]>>a.rshift;n=e[1]>>a.rshift;t=e[2]>>a.rshift;return this.r1<=r&&r<=this.r2&&this.g1<=n&&n<=this.g2&&this.b1<=t&&t<=this.b2};return e}();t=function(){function e(){this.cboxes=new n(function(e,t){var n,r;n=e.count()*e.volume();r=t.count()*t.volume();return n>r?1:n<r?-1:0})}e.prototype.push=function(e){return this.cboxes.push({cbox:e,color:e.average()})};e.prototype.palette=function(){return this.cboxes.map(function(e){return e.color})};e.prototype.size=function(){return this.cboxes.size()};e.prototype.map=function(e){var t,n,r;for(t=n=0,r=this.cboxes.size();n<r;t=n+=1)return this.cboxes.peek(t).cbox.contains(e)?this.cboxes.peek(t).color:this.nearest(e)};e.prototype.cboxes=function(){return this.cboxes};e.prototype.nearest=function(e){var t,n,r,i,s,o,u;s=function(e){return e*e};r=1e9;for(n=o=0,u=this.cboxes.size();o<u;n=o+=1){t=Math.sqrt(s(e[0]-this.cboxes.peek(n).color[0])+s(e[1]-this.cboxes.peek(n).color[1])+s(e[2]-this.cboxes.peek(n).color[2]));if(t<r){r=t;i=this.cboxes.peek(n).color}}return i};return e}();s=function(e){var t,n,r,s,o,u,f,l,c;s=1<<3*a.sigbits;r=new Array(s);for(l=0,c=e.length;l<c;l++){u=e[l];f=u[0]>>a.rshift;n=u[1]>>a.rshift;t=u[2]>>a.rshift;o=i(f,n,t);r[o]=(r[o]||0)+1}return r};r=function(t,n){var r,i,s,o,u,f,l,c,h,p,d,v;p=1e6;h=0;f=1e6;u=0;s=1e6;i=0;for(d=0,v=t.length;d<v;d++){l=t[d];c=l[0]>>a.rshift;o=l[1]>>a.rshift;r=l[2]>>a.rshift;c<p?p=c:c>h&&(h=c);o<f?f=o:o>u&&(u=o);r<s?s=r:r>i&&(i=r)}return new e(p,h,f,u,s,i,n)};o=function(e,t){var n,r,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U;if(!t.count())return;if(t.count()===1)return[t.copy()];p=t.r2-t.r1+1;u=t.g2-t.g1+1;r=t.b2-t.b1+1;l=Math.max(p,u,r);v=0;c=[];f=[];if(l===p)for(h=m=N=t.r1,C=t.r2;m<=C;h=m+=1){d=0;for(o=g=H=t.g1,B=t.g2;g<=B;o=g+=1)for(n=y=j=t.b1,F=t.b2;y<=F;n=y+=1){a=i(h,o,n);d+=e[a]||0}v+=d;c[h]=v}else if(l===u)for(o=b=I=t.g1,q=t.g2;b<=q;o=b+=1){d=0;for(h=w=R=t.r1,U=t.r2;w<=U;h=w+=1)for(n=E=k=t.b1,L=t.b2;E<=L;n=E+=1){a=i(h,o,n);d+=e[a]||0}v+=d;c[o]=v}else for(n=S=A=t.b1,O=t.b2;S<=O;n=S+=1){d=0;for(h=x=M=t.r1,_=t.r2;x<=_;h=x+=1)for(o=T=D=t.g1,P=t.g2;T<=P;o=T+=1){a=i(h,o,n);d+=e[a]||0}v+=d;c[n]=v}c.forEach(function(e,t){return f[t]=v-e});s=function(e){var n,r,i,s,o,u,a,l,h,p,d,m;o=e+"1";u=e+"2";for(a=p=d=t[o],m=t[u];p<=m;a=p+=1)if(c[a]>v/2){n=t.copy();r=t.copy();l=a-t[o];h=t[u]-a;l<=h?s=Math.min(t[u]-1,~~(a+h/2)):s=Math.max(t[o],~~(a-1-l/2));while(!c[s])s++;i=f[s];while(!i&&c[s-1])i=f[--s];n[u]=s;r[o]=n[u]+1;console.log("cbox counts: "+t.count()+", "+n.count()+", "+r.count());return[n,r]}};if(l===p)return s("r");if(l===u)return s("g");if(l===r)return s("b")};a.prototype.quantize=function(e,i){var u,a,f,l,c,h,p=this;if(!e.length||i<2||i>256){console.log("invalid arguments");return!1}f=s(e);u=r(e,f);c=new n(function(e,t){var n,r;n=e.count();r=t.count();return n>r?1:n<r?-1:0});c.push(u);l=function(e,t){var n,r,i,s,a;s=1;a=0;while(a<p.maxIterations){u=e.pop();if(!u.count()){e.push(u);a++;continue}i=o(f,u);n=i[0];r=i[1];if(!n){console.log("cbox1 not defined; shouldn't happen");return}e.push(n);if(r){e.push(r);s++}if(s>=t)return;if(a++>p.maxIterations){console.log("infinite loop; perhaps too few pixels");return}}};l(c,this.fractByPopulations*i);h=new n(function(e,t){var n,r;n=e.count()*e.volume();r=t.count()*t.volume();return n>r?1:n<r?-1:0});while(c.size())h.push(c.pop());l(h,i-h.size());a=new t;while(h.size())a.push(h.pop());return a};return a}.call(this);e=function(){function e(){}e.getColorMap=function(e,n,r,i,s,o){var u,a,f,l,c,h,p,d,v,m;o==null&&(o=8);f=e.getContext("2d").getImageData(n,r,i,s).data;l=[];for(h=p=r,v=r+s;p<v;h=p+=1){a=h*i*4;for(c=d=n,m=n+i;d<m;c=d+=1){u=a+c*4;l.push([f[u],f[u+1],f[u+2]])}}return(new t).quantize(l,o)};e.colorDist=function(e,t){var n;n=function(e){return e*e};return n(e[0]-t[0])+n(e[1]-t[1])+n(e[2]-t[2])};e.launch=function(t,n){return $(t).on("load",function(){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;t.height=Math.round(t.height*(300/t.width));t.width=300;n.width=t.width;n.height=t.height+150;n.getContext("2d").drawImage(t,0,0,t.width,t.height);i=e.getColorMap(n,0,0,t.width*.5,t.height,4);s=i.cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}});s.sort(function(e,t){return t.count-e.count});r=s[0].rgb;l=e.getColorMap(n,0,0,t.width,t.height,10);c=l.cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}});c.sort(function(e,t){return t.count-e.count});h=0;for(d=0,m=c.length;d<m;d++){o=c[d];u=e.colorDist(r,o.rgb);if(u>h){h=u;a=o.rgb}}h=0;for(v=0,g=c.length;v<g;v++){o=c[v];u=e.colorDist(r,o.rgb);if(u>h&&o.rgb!==a){h=u;f=o.rgb}}p=function(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", 1)"};$("body").css("background-color",""+p(r));$("ol li").css("color",""+p(f));$("h2").css("color",""+p(a));$(".palette li:eq(0) .swatch").css("background-color",""+p(r));$(".palette li:eq(1) .swatch").css("background-color",""+p(a));return $(".palette li:eq(2) .swatch").css("background-color",""+p(f))})};return e}();$(document).ready(function(){var t,n,r,i;n=this;t=document.getElementById("album-artwork");r=new Image;i=$(".cover-picker img").attr("src");r.src=i;return e.launch(r,t)})}).call(this);jQuery(document).ready(function(e){e(".video-background").length&&e(".video-background").mb_YTPlayer();if(e(".filter")){e('.filter a[href="#all"]').addClass("active").tab("show");e("#all").addClass("fade in");e('a[data-toggle="tab"]').on("shown",function(t){e(".tab-content .active").addClass("fade in")})}e("body").hasClass("blog")||e(".menu-dispatch").removeClass("active");e("a.distribute").length&&e("a.distribute").click(function(t){t.preventDefault();e(".request").fadeToggle("fast");e("html, body").animate({scrollTop:e(".request .letter").offset().top},"slow");var n=e(".request .letter h1").text();e("#input_1_3").attr("value",n)});e(".table-sortable").length&&e(".table-sortable").tablesorter({sortList:[[0,0]],cssAsc:"sorted ascending",cssDesc:"sorted descending"});e(".toggle-tracklist")&&e(".toggle-tracklist").click(function(t){var n=e(".tracklist").is(":visible")?" Show playlist":" Hide playlist";e(".toggle-tracklist").text(n);e(".tracklist").slideToggle("fast")});e("body").hasClass("single-movie")&&e("#content").fitVids();e(".fancybox").length&&e(".fancybox").fancybox({helpers:{title:{type:"inside"}}});if(e("body").hasClass("home")){var t=audiojs.createAll(),n=t[0];audioLink=e("audio").attr("src");n.load(audioLink);e(".audiojs .scrubber").each(function(){e(this).add(".audiojs .time").add(".audiojs .error-message").wrapAll('<div class="info" />')});var r=e("audio").data("title");e(".audiojs .info").prepend('<div class="title">'+r+"</div>")}if(e("body").hasClass("single-collection")||e("body").hasClass("tes")){var t=audiojs.createAll({trackEnded:function(){var t=e("ol li.playing").next();t.length||(t=e("ol li").first());t.addClass("playing").siblings().removeClass("playing");e(".audiojs .title").text(t.find(".title").text());n.load(e("a",t).attr("data-src"));n.play()}}),n=t[0];first=e("ol li a").attr("data-src");e("ol li").first().addClass("playing");n.load(first);e("ol li").click(function(t){t.preventDefault();e(this).addClass("playing").siblings().removeClass("playing");n.load(e("a",this).attr("data-src"));n.play()});e(".audiojs .scrubber").each(function(){e(this).add(".audiojs .error-message").wrapAll('<div class="info" />')});var r=e(".tracklist .playing .title").text();e(".audiojs .info").prepend('<div class="title">'+r+"</div>");e(".audiojs .time").insertAfter(e(".audiojs .title"));e(".tracklist a").click(function(){var t=e(this).find(".title").text();e(".audiojs .title").text(t)})}if(e("body").hasClass("single-collection")){e("#input_1_2_1_container label").insertBefore("#input_1_2_1_container input");e("#input_1_2_3_container label").insertBefore("#input_1_2_3_container input");e("#input_1_2_4_container label").insertBefore("#input_1_2_4_container select");e("#input_1_2_5_container label").insertBefore("#input_1_2_5_container input")}if(e("body").hasClass("setlist-computer")){e(":range").rangeinput();var i=e(".view-lead-sheets"),s=i.attr("href");e(".computer button").click(function(t){t.preventDefault();e(".setlist").hide();e(".lead-sheets").hide();e(".setlist li").remove();e(".lead-sheets li").remove();var n=e('input[name="songs"]').val(),r=e('input[name="bleeds"]').val(),o=e('input[name="strategies"]').val();isNaN(n)&&(n=0);isNaN(r)&&(r=0);isNaN(o)&&(o=0);var u=[],a=[],f=[],l=[];e(".all-songs li").each(function(){u.push(e(this).html())});e(".all-strategies li").each(function(){a.push(e(this).text())});u.sort(function(){return.5-Math.random()});a.sort(function(){return.5-Math.random()});for(var c=0;c<n;c++){var h=u[c];c<r&&(h+=' <span class="bleed"></span>');f.push(h);f.sort(function(){return.5-Math.random()})}for(var c=0;c<n;c++){var h=f[c];c<o&&(h=h+' <span class="strategy">'+a[c]+"</span>");l.push(h);l.sort(function(){return.5-Math.random()})}for(c in l){var p=l[c];e(".setlist ol").append("<li>"+p+"</li>")}e(".setlist").fadeIn();var d=[];e(".setlist .track-id").each(function(){d.push(e(this).text())});url=s+"?tracks="+d;i.attr("href",url)})}});